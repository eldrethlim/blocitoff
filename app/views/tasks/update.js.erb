<% if @task.valid? %>
  $('#form_task_container').remove();
  $('#edit_task_<%= @task.id %>_link').show();

  <% if @task.complete %>
    $('#task_row_<%=@task.id%>').remove();
    $('#completed_tasks').prepend("<%= escape_javascript(render(partial: '/tasks/table', locals: {task: @task})) %>");
  <% else %>
    $('#task_row_<%=@task.id%>').remove();
    $('#incomplete_tasks').prepend("<%= escape_javascript(render(partial: '/tasks/table', locals: {task: @task})) %>");
  <% end %>

  $('#flash_messages').html("<%= escape_javascript(render(partial: '/layouts/flash')) %>");
<% else %>
  $('#flash_messages').html("<%= escape_javascript(render(partial: '/layouts/flash')) %>");
<% end %>